# File autogenerated by ./scripts/gen-certs.sh
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: k8s-slurm-injector-webhook
  labels:
    app: k8s-slurm-injector-webhook
    kind: mutator
webhooks:
  - name: all-mark-webhook.slok.dev
    # Avoid chicken-egg problem with our webhook deployment.
    objectSelector:
      matchExpressions:
      - key: app
        operator: NotIn
        values: ["k8s-slurm-injector"]
    admissionReviewVersions: ["v1"]
    sideEffects: None
    clientConfig:
      service:
        name: k8s-slurm-injector
        namespace: k8s-slurm-injector
        path: /wh/mutating/allmark
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVKRENDQW95Z0F3SUJBZ0lSQUlucUJ2enp5YS82WXpTdDgyUzFFdFF3RFFZSktvWklodmNOQVFFTEJRQXcKVnpFZU1Cd0dBMVVFQ2hNVmJXdGpaWEowSUdSbGRtVnNiM0J0Wlc1MElFTkJNUll3RkFZRFZRUUxEQTF6Ykc5cgpRRzVoZFhScGJIVnpNUjB3R3dZRFZRUUREQlJ0YTJObGNuUWdjMnh2YTBCdVlYVjBhV3gxY3pBZUZ3MHlNREV5Ck1qRXdOelEwTkRSYUZ3MHlNekF6TWpFd056UTBORFJhTUVFeEp6QWxCZ05WQkFvVEhtMXJZMlZ5ZENCa1pYWmwKYkc5d2JXVnVkQ0JqWlhKMGFXWnBZMkYwWlRFV01CUUdBMVVFQ3d3TmMyeHZhMEJ1WVhWMGFXeDFjekNDQVNJdwpEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTmdpbXBOYmpLUE1CSzRwNmFiQnhwSzhWNitGCms0YXlnRnYvVnMyVFJ3Tll3L24yNXFNTllCTC9KWS9hKzJuSGU5elZ3c0c2RE5nSXBxR01OY2Q4YTBwNlM4ZW0KSnJqTmlpNFh3QVNFSUxyeXVLMUZzem4xblFReENVbkdRYVcrOXRtZ1kvTDdSYkFPOVFnK21mRFVaOGpuRkl6VAo5TTZaNjh4OG1lck14YU0rdHkzK0RRRDVBRHNBSXBxa0E1SWgvanF1ZGpRTHR3Y1l5UEExWmo3MHRrTk9qekVkCll6M2VUV3BlL0tmOGRwci9SOHRWUzAwbmhTbjlSZXEzd2ZpdmdEM2JCcjFBU3Vkcy9nWm9OQUpRdVJmS2l5emIKbVV6SGd4M3JRR200dngxS2N5Mi91Q1EvQjR5Z2VqVlJHWHRWM3lrWER3ejlOdld4cmJZSEEwTXlLbnNDQXdFQQpBYU9CZ0RCK01BNEdBMVVkRHdFQi93UUVBd0lGb0RBVEJnTlZIU1VFRERBS0JnZ3JCZ0VGQlFjREFUQWZCZ05WCkhTTUVHREFXZ0JTOUd5SVYvODFod21IMXVBNHZtS1dPeEl0eS9UQTJCZ05WSFJFRUx6QXRnaXRyT0hNdGQyVmkKYUc5dmF5MWxlR0Z0Y0d4bExtczRjeTEzWldKb2IyOXJMV1Y0WVcxd2JHVXVjM1pqTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQmdRQzQwL0ZhaWZFRHNLSWZhSnFub3N1V04zWjZQNExTcmh5STFIV3dDQnh4OEFoL25ialFBdWNmCkVnNHpEaUR0TkJ6T3FZRXhRMU1LMnZ6NFcwZG01WVU5Y3FjelNUeHptSzVtMlN2S01nSzNWcnFKMGl2SlNmalcKNDYvWndqQWl1a1FuS1lBTDZmRTUxcnU3cFdaWUpIWW9NVFFpUHBxRkFrNGQveHhLbGl4QktNWVlyZFQ2NVVlegpwQjRwSXJQYytYK3lqQlV5aExtZU5qeU1CSXZPb2t5UW0rNVp4djhmcnAzNTFpajJLMVdkOGJxTGhaeDllVm0rCldRWnBZeGIrRmp2b3RHVFBtZmlCb2pKNWRjekV5QS9Zck1DczdrOTl3QlAzbDhKZWlGZEhGUTQyV2FZeU4vNjAKWXZZSTkzWHNqanNtbWJOek9MQSt3MlIzalB4U3BiVkVRUmJlSWtvWXNJTDFGOFJoVE1sVjVLd3hCdkp6YnVrbwpKR2lOS0JZZ0ZoWVozbHk0ZS82b1YwTk9jRlYwaGxyMWtRVmRHNEJBNy9UYkhGdHZteS9sTTdWTkFuUEx0NDJMCkxrNjJjVG13OWpiSGI2WlROOVFyNlVSVHNWeWpEeVFvejhFbkZVSVJ5bWZWcCtCK3FDZmIzMGFiQnN5QkJnY2kKSUtFbzAwaVpnZW89Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - operations: ["CREATE", "UPDATE"]
        apiGroups: ["*"]
        apiVersions: ["*"]
        resources: ["deployments", "daemonsets", "cronjobs", "jobs", "statefulsets", "pods"]

  - name: service-monitor-safer.slok.dev
    admissionReviewVersions: ["v1"]
    sideEffects: None
    clientConfig:
      service:
        name: k8s-slurm-injector
        namespace: k8s-slurm-injector
        path: /wh/mutating/safeservicemonitor
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVKRENDQW95Z0F3SUJBZ0lSQUlucUJ2enp5YS82WXpTdDgyUzFFdFF3RFFZSktvWklodmNOQVFFTEJRQXcKVnpFZU1Cd0dBMVVFQ2hNVmJXdGpaWEowSUdSbGRtVnNiM0J0Wlc1MElFTkJNUll3RkFZRFZRUUxEQTF6Ykc5cgpRRzVoZFhScGJIVnpNUjB3R3dZRFZRUUREQlJ0YTJObGNuUWdjMnh2YTBCdVlYVjBhV3gxY3pBZUZ3MHlNREV5Ck1qRXdOelEwTkRSYUZ3MHlNekF6TWpFd056UTBORFJhTUVFeEp6QWxCZ05WQkFvVEhtMXJZMlZ5ZENCa1pYWmwKYkc5d2JXVnVkQ0JqWlhKMGFXWnBZMkYwWlRFV01CUUdBMVVFQ3d3TmMyeHZhMEJ1WVhWMGFXeDFjekNDQVNJdwpEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTmdpbXBOYmpLUE1CSzRwNmFiQnhwSzhWNitGCms0YXlnRnYvVnMyVFJ3Tll3L24yNXFNTllCTC9KWS9hKzJuSGU5elZ3c0c2RE5nSXBxR01OY2Q4YTBwNlM4ZW0KSnJqTmlpNFh3QVNFSUxyeXVLMUZzem4xblFReENVbkdRYVcrOXRtZ1kvTDdSYkFPOVFnK21mRFVaOGpuRkl6VAo5TTZaNjh4OG1lck14YU0rdHkzK0RRRDVBRHNBSXBxa0E1SWgvanF1ZGpRTHR3Y1l5UEExWmo3MHRrTk9qekVkCll6M2VUV3BlL0tmOGRwci9SOHRWUzAwbmhTbjlSZXEzd2ZpdmdEM2JCcjFBU3Vkcy9nWm9OQUpRdVJmS2l5emIKbVV6SGd4M3JRR200dngxS2N5Mi91Q1EvQjR5Z2VqVlJHWHRWM3lrWER3ejlOdld4cmJZSEEwTXlLbnNDQXdFQQpBYU9CZ0RCK01BNEdBMVVkRHdFQi93UUVBd0lGb0RBVEJnTlZIU1VFRERBS0JnZ3JCZ0VGQlFjREFUQWZCZ05WCkhTTUVHREFXZ0JTOUd5SVYvODFod21IMXVBNHZtS1dPeEl0eS9UQTJCZ05WSFJFRUx6QXRnaXRyT0hNdGQyVmkKYUc5dmF5MWxlR0Z0Y0d4bExtczRjeTEzWldKb2IyOXJMV1Y0WVcxd2JHVXVjM1pqTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQmdRQzQwL0ZhaWZFRHNLSWZhSnFub3N1V04zWjZQNExTcmh5STFIV3dDQnh4OEFoL25ialFBdWNmCkVnNHpEaUR0TkJ6T3FZRXhRMU1LMnZ6NFcwZG01WVU5Y3FjelNUeHptSzVtMlN2S01nSzNWcnFKMGl2SlNmalcKNDYvWndqQWl1a1FuS1lBTDZmRTUxcnU3cFdaWUpIWW9NVFFpUHBxRkFrNGQveHhLbGl4QktNWVlyZFQ2NVVlegpwQjRwSXJQYytYK3lqQlV5aExtZU5qeU1CSXZPb2t5UW0rNVp4djhmcnAzNTFpajJLMVdkOGJxTGhaeDllVm0rCldRWnBZeGIrRmp2b3RHVFBtZmlCb2pKNWRjekV5QS9Zck1DczdrOTl3QlAzbDhKZWlGZEhGUTQyV2FZeU4vNjAKWXZZSTkzWHNqanNtbWJOek9MQSt3MlIzalB4U3BiVkVRUmJlSWtvWXNJTDFGOFJoVE1sVjVLd3hCdkp6YnVrbwpKR2lOS0JZZ0ZoWVozbHk0ZS82b1YwTk9jRlYwaGxyMWtRVmRHNEJBNy9UYkhGdHZteS9sTTdWTkFuUEx0NDJMCkxrNjJjVG13OWpiSGI2WlROOVFyNlVSVHNWeWpEeVFvejhFbkZVSVJ5bWZWcCtCK3FDZmIzMGFiQnN5QkJnY2kKSUtFbzAwaVpnZW89Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - operations: ["CREATE", "UPDATE"]
        apiGroups: ["monitoring.coreos.com"]
        apiVersions: ["v1"]
        resources: ["servicemonitors"]

---
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: k8s-slurm-injector-webhook
  labels:
    app: k8s-slurm-injector-webhook
    kind: validator
webhooks:
  - name: ingress-validation-webhook.slok.dev
    admissionReviewVersions: ["v1"]
    sideEffects: None
    clientConfig:
      service:
        name: k8s-slurm-injector
        namespace: k8s-slurm-injector
        path: /wh/validating/ingress
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVKRENDQW95Z0F3SUJBZ0lSQUlucUJ2enp5YS82WXpTdDgyUzFFdFF3RFFZSktvWklodmNOQVFFTEJRQXcKVnpFZU1Cd0dBMVVFQ2hNVmJXdGpaWEowSUdSbGRtVnNiM0J0Wlc1MElFTkJNUll3RkFZRFZRUUxEQTF6Ykc5cgpRRzVoZFhScGJIVnpNUjB3R3dZRFZRUUREQlJ0YTJObGNuUWdjMnh2YTBCdVlYVjBhV3gxY3pBZUZ3MHlNREV5Ck1qRXdOelEwTkRSYUZ3MHlNekF6TWpFd056UTBORFJhTUVFeEp6QWxCZ05WQkFvVEhtMXJZMlZ5ZENCa1pYWmwKYkc5d2JXVnVkQ0JqWlhKMGFXWnBZMkYwWlRFV01CUUdBMVVFQ3d3TmMyeHZhMEJ1WVhWMGFXeDFjekNDQVNJdwpEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTmdpbXBOYmpLUE1CSzRwNmFiQnhwSzhWNitGCms0YXlnRnYvVnMyVFJ3Tll3L24yNXFNTllCTC9KWS9hKzJuSGU5elZ3c0c2RE5nSXBxR01OY2Q4YTBwNlM4ZW0KSnJqTmlpNFh3QVNFSUxyeXVLMUZzem4xblFReENVbkdRYVcrOXRtZ1kvTDdSYkFPOVFnK21mRFVaOGpuRkl6VAo5TTZaNjh4OG1lck14YU0rdHkzK0RRRDVBRHNBSXBxa0E1SWgvanF1ZGpRTHR3Y1l5UEExWmo3MHRrTk9qekVkCll6M2VUV3BlL0tmOGRwci9SOHRWUzAwbmhTbjlSZXEzd2ZpdmdEM2JCcjFBU3Vkcy9nWm9OQUpRdVJmS2l5emIKbVV6SGd4M3JRR200dngxS2N5Mi91Q1EvQjR5Z2VqVlJHWHRWM3lrWER3ejlOdld4cmJZSEEwTXlLbnNDQXdFQQpBYU9CZ0RCK01BNEdBMVVkRHdFQi93UUVBd0lGb0RBVEJnTlZIU1VFRERBS0JnZ3JCZ0VGQlFjREFUQWZCZ05WCkhTTUVHREFXZ0JTOUd5SVYvODFod21IMXVBNHZtS1dPeEl0eS9UQTJCZ05WSFJFRUx6QXRnaXRyT0hNdGQyVmkKYUc5dmF5MWxlR0Z0Y0d4bExtczRjeTEzWldKb2IyOXJMV1Y0WVcxd2JHVXVjM1pqTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQmdRQzQwL0ZhaWZFRHNLSWZhSnFub3N1V04zWjZQNExTcmh5STFIV3dDQnh4OEFoL25ialFBdWNmCkVnNHpEaUR0TkJ6T3FZRXhRMU1LMnZ6NFcwZG01WVU5Y3FjelNUeHptSzVtMlN2S01nSzNWcnFKMGl2SlNmalcKNDYvWndqQWl1a1FuS1lBTDZmRTUxcnU3cFdaWUpIWW9NVFFpUHBxRkFrNGQveHhLbGl4QktNWVlyZFQ2NVVlegpwQjRwSXJQYytYK3lqQlV5aExtZU5qeU1CSXZPb2t5UW0rNVp4djhmcnAzNTFpajJLMVdkOGJxTGhaeDllVm0rCldRWnBZeGIrRmp2b3RHVFBtZmlCb2pKNWRjekV5QS9Zck1DczdrOTl3QlAzbDhKZWlGZEhGUTQyV2FZeU4vNjAKWXZZSTkzWHNqanNtbWJOek9MQSt3MlIzalB4U3BiVkVRUmJlSWtvWXNJTDFGOFJoVE1sVjVLd3hCdkp6YnVrbwpKR2lOS0JZZ0ZoWVozbHk0ZS82b1YwTk9jRlYwaGxyMWtRVmRHNEJBNy9UYkhGdHZteS9sTTdWTkFuUEx0NDJMCkxrNjJjVG13OWpiSGI2WlROOVFyNlVSVHNWeWpEeVFvejhFbkZVSVJ5bWZWcCtCK3FDZmIzMGFiQnN5QkJnY2kKSUtFbzAwaVpnZW89Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - operations: ["CREATE", "UPDATE"]
        apiGroups: ["*"]
        apiVersions: ["*"]
        resources: ["ingresses"]